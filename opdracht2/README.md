# Browser Technologies

//Robuuste, toegankelijke websites leren bouwen â€¦

# Demo

[Menu link](https://hackshackshacks.github.io/browser-technologies/opdracht2/index.html)

[Modal link](https://hackshackshacks.github.io/browser-technologies/opdracht2/disclaimer.html)

# Responsive navigation

This component is a simple navigation that shifts to a hamburger menu on small screens. The menu is generated by Javascript and will fall back to a more basic css only menu if the needed Javascript isn't supported.

## Testing

The component works in most modern browsers. From internet explorer 9 and down it will fall back to the CSS menu.

## CSS Fallbacks

New CSS property fallback to more widely supported properties.

```
nav>ul li {
  display: block;
  display: flex;
}
```

## Feature detection

The hamburger menu works primarily with Javascript. For this reason the menu is styled from Javacript and the needed elements (open and close button) are added. This only happens when the browser supports eventlisteners.

Check if addEventListener is supported:

```
typeof nav.addEventListener === "function"
```

If eventlisteners aren't supported the menu will fall back to an always visible menu. It is still just as usable but it takes up more of the screen.

Since the menu very much depends on CSS to function, I was looking for a way to detect if the CSS stylesheet is loaded. Since I couldn't find much online I thought of my own solution. I came up with the following:

HTML:

```
<span id="cssCheck"></span>
```

CSS:

```
#cssCheck {
  position: absolute;
  right: 0;
}
```

JS:

```
if (cssCheck.getBoundingClientRect().right === window.innerWidth) {
  cssAvailable = true
}
```

This should only (and did in my tests) return `true` if the stylesheet is actually loaded. This makes sure that my JS doesn't add the hamburger functionality when the CSS is not available. This is an experiment. I am aware of other methods that accomplish the same thing. Such as loading a seperate stylesheet from JS. All solutions I came across seemed to have a downside to them so that's why I tried something new.

## Device lab

I tested the navigation using the schools device lab. The navigation seemed to work on all the devices, as is shown below.

![Device lab test - menu](https://github.com/hackshackshacks/browser-technologies/blob/master/opdracht2/readme_images/menu.png?raw=true)

# Pop up modal

This component is a modal that opens when you click a link. Within the modal there is a fixed header with a 'close' button and a scrollable content section.

## Testing

The support for this component is roughly the same as the hamburger in modern browsers. IE9 and IE8 fail to properly show the modal.

## CSS Fallbacks

New CSS property fallback to more widely supported properties.

```
.dialog header div {
  display: block;
  display: flex;
}
```

## Feature detection

Check if eventlistener is available:

`if (typeof modal.addEventListener === "function") {`

The modal heavily relies on either support for the `<dialog>` tag or CSS 2d transforms. For this reason I designed two feature detectors.

Check if the dialog tag is supported:

`if ("open" in modal) {`

This returns true if the `<dialog>` tag is supported by the browser.

Fallback to div

```
var html = modal.innerHTML
var parent = modal.parentElement
var newEl = document.createElement("div")
newEl.innerHTML = html
parent.replaceChild(newEl, modal)
```

If the `<dialog>` tag is not supported the tag will be replaced by a `<div>` tag that I can style as needed.

Transform

```
function checkTransform() {
  var style = Object.keys(document.body.style)
  for (var i = 0; i < style.length; i++) {
    if (style[i].replace(/[A-Z]/g, "-$&").toLowerCase() === "transform") {
      return true
    }
  }
  return false
}
if (checkTransform()) {
  modal.className += " transform"
}
```

This snippet adds the "transform" class to the element if the property is supported by the browser. This allows me to style the element differently.

[source](https://twitter.com/LeaVerou/status/998714954386755590)

At the moment the modal falls back to be lower down in the html if CSS transforms aren't supported. This way users can simply scroll to it instead of opening it.

## Device lab

I tested the modal the same way I did the navigation. The modal works as intended on all the available devices.

![Device lab test - modal](https://github.com/hackshackshacks/browser-technologies/blob/master/opdracht2/readme_images/modal_total.png?raw=true)

## Research

As I was building these demos I researched browser support for specific features. For this research my primary source was [caniuse](http://www.caniuse.com).

![flex](https://github.com/hackshackshacks/browser-technologies/blob/master/opdracht2/readme_images/flex.png?raw=true)

![transform](https://github.com/hackshackshacks/browser-technologies/blob/master/opdracht2/readme_images/transform.png?raw=true)

![Device lab test - modal](https://github.com/hackshackshacks/browser-technologies/blob/master/opdracht2/readme_images/eventlistener.png?raw=true)
